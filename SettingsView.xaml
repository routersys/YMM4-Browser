<UserControl x:Class="YMM4Browser.View.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="settingsView">

    <UserControl.Resources>
        <LinearGradientBrush x:Key="UpdateBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#FF2E8B57" Offset="0.0" />
            <GradientStop Color="#FF2A7A4E" Offset="1.0" />
        </LinearGradientBrush>

        <Style TargetType="GroupBox">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"/>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
        <StackPanel Margin="10">

            <StackPanel Orientation="Horizontal" Margin="2,2,2,10">
                <Border BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                        BorderThickness="1" CornerRadius="3"
                        Background="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"
                        Padding="8,4" Margin="0,0,5,0">
                    <TextBlock x:Name="VersionText"
                               VerticalAlignment="Center"
                               Foreground="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}"/>
                </Border>

                <Border x:Name="UpdateNotification"
                        BorderThickness="1" CornerRadius="3"
                        Padding="8,4">
                    <StackPanel Orientation="Horizontal">
                        <Path x:Name="UpdateIcon" Width="14" Height="14" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock x:Name="UpdateMessage"
                                   VerticalAlignment="Center"
                                   TextWrapping="NoWrap"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <GroupBox Header="基本設定" Margin="0,0,0,10">
                <StackPanel Margin="5">
                    <Label Content="ホームページURL"/>
                    <TextBox x:Name="HomeUrlTextBox"
                             Text="{Binding HomeUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,0,10"
                             Height="24"
                             VerticalContentAlignment="Center"/>

                    <CheckBox x:Name="CompactModeCheckBox"
                              IsChecked="{Binding CompactMode, Mode=TwoWay}"
                              Content="コンパクトモード"
                              Margin="0,0,0,5"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Header="セキュリティ設定" Margin="0,0,0,10">
                <StackPanel Margin="5">
                    <CheckBox x:Name="AdBlockCheckBox"
                              IsChecked="{Binding EnableAdBlock, Mode=TwoWay}"
                              Content="広告ブロックを有効にする"
                              Margin="0,0,0,5"/>
                    <CheckBox x:Name="PopupBlockCheckBox"
                              IsChecked="{Binding EnablePopupBlock, Mode=TwoWay}"
                              Content="ポップアップブロックを有効にする"
                              Margin="0,0,0,5"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Header="ブックマーク管理">
                <StackPanel Margin="5">
                    <Label Content="登録済みブックマーク"/>
                    <Border Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                            BorderThickness="1"
                            Margin="0,0,0,10">
                        <ListView x:Name="BookmarkListView"
                                  ItemsSource="{Binding Bookmarks}"
                                  Height="200"
                                  SelectionMode="Extended"
                                  Background="Transparent"
                                  BorderThickness="0">
                            <ListView.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                    <Setter Property="ContextMenu">
                                        <Setter.Value>
                                            <ContextMenu>
                                                <MenuItem Header="編集"
                                                          Command="{Binding Path=EditBookmarkCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                          CommandParameter="{Binding}"/>
                                                <MenuItem Header="削除"
                                                          Command="{Binding Path=RemoveBookmarkFromMenuCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                          CommandParameter="{Binding}"/>
                                            </ContextMenu>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListView.ItemContainerStyle>
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="名前" Width="150">
                                        <GridViewColumn.HeaderContainerStyle>
                                            <Style TargetType="GridViewColumnHeader">
                                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
                                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                                            </Style>
                                        </GridViewColumn.HeaderContainerStyle>
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}"
                                                           VerticalAlignment="Center"
                                                           Margin="4,0"
                                                           TextTrimming="CharacterEllipsis"
                                                           Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                    <GridViewColumn Header="URL">
                                        <GridViewColumn.HeaderContainerStyle>
                                            <Style TargetType="GridViewColumnHeader">
                                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
                                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                                            </Style>
                                        </GridViewColumn.HeaderContainerStyle>
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Url}"
                                                           VerticalAlignment="Center"
                                                           Margin="4,0"
                                                           TextTrimming="CharacterEllipsis"
                                                           Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </Border>

                    <StackPanel Orientation="Horizontal">
                        <Button Content="追加"
                                Width="70"
                                Height="28"
                                Margin="0,0,10,0"
                                Click="AddBookmarkButton_Click"/>
                        <Button Content="削除"
                                Width="70"
                                Height="28"
                                Click="RemoveBookmarkButton_Click"/>
                        <TextBlock Text="※複数選択可能 (Ctrl/Shiftキー)"
                                   VerticalAlignment="Center"
                                   Margin="15,0,0,0"
                                   FontSize="11"
                                   Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </ScrollViewer>
</UserControl>